
db.createCollection('comanda',{
validator:{
$jsonSchema:{
bsonType:'object',
title:'comanda',
required:['botiga'],
properties:{
quantitats:{
bsonType:'array',
items:{
bsonType:'int'
}
},
data_hora_comanda:{
bsonType:'date'
},
data_hora_entrega:{
bsonType:'date'
},
repartiment:{
bsonType:'bool'
},
preu_total:{
bsonType:['decimal','int','double','string']
},
productes:{
bsonType:'array',
items:{
title:'producte',
properties:{
tipus:{
enum:['pizza','hamburguesa','beguda']
},
nom:{
bsonType:'string'
},
preu:{
bsonType:['decimal','int','double','string']
}
}
}
},
repartidor:{
bsonType:'object',
title:'repartidor',
properties:{
nom:{
bsonType:'string'
},
cognom:{
bsonType:'string'
},
telefon:{
bsonType:'string'
}
}
},
botiga:{
bsonType:'objectId'
},
client:{
bsonType:'object',
title:'client',
required:['client_id'],
properties:{
nom:{
bsonType:'string'
},
cognom:{
bsonType:'string'
},
telefon:{
bsonType:'string'
},
adreça:{
bsonType:'object',
title:'adreça',
properties:{
localitat:{
bsonType:'object',
title:'localitat',
properties:{
nom:{
bsonType:'string'
},
id_localitat:{
bsonType:'objectId'
},
provincia:{
bsonType:'object',
title:'provincia',
properties:{
nom:{
bsonType:'string'
},
id_provincia:{
bsonType:'objectId'
}
}
}
}
},
codi_postal:{
bsonType:'string'
},
adreça:{
bsonType:'string'
}
}
},
client_id:{
bsonType:'objectId'
}
}
}
}
}
},
autoIndexId:true
});
db.createCollection('botiga',{
validator:{
$jsonSchema:{
bsonType:'object',
title:'botiga',
properties:{
adreça:{
bsonType:'object',
title:'adreça',
properties:{
localitat:{
bsonType:'object',
title:'localitat',
properties:{
nom:{
bsonType:'string'
},
id_localitat:{
bsonType:'objectId'
},
provincia:{
bsonType:'object',
title:'provincia',
properties:{
nom:{
bsonType:'string'
},
id_provincia:{
bsonType:'objectId'
}
}
}
}
},
codi_postal:{
bsonType:'string'
},
adreça:{
bsonType:'string'
}
}
},
nom:{
bsonType:'string'
},
treballadors:{
bsonType:'array',
items:{
properties:{
tipus:{
enum:['cuiner','repartidor']
},
nom:{
bsonType:'string'
},
cognom:{
bsonType:'string'
},
NIF:{
bsonType:'string'
},
telefon:{
bsonType:'string'
},
id_treballador:{
bsonType:'objectId'
}
}
}
}
}
}
},
autoIndexId:true
});
db.createCollection('producte',{
validator:{
$jsonSchema:{
bsonType:'object',
title:'producte',
properties:{
nom:{
bsonType:'string'
},
descripcio:{
bsonType:'string'
},
img:{
bsonType:'string'
},
preu:{
bsonType:['decimal','int','double','string']
},
tipus:{
enum:['pizza','hamburguesa','beguda']
},
caegoria:{
bsonType:'object',
title:'categoria',
properties:{
id_categoria:{
bsonType:'objectId'
},
nom:{
bsonType:'string'
}
}
}
}
}
},
autoIndexId:true
});


